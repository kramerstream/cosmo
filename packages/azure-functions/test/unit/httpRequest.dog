use (
  alias:expected
  {httpRequest} = ~
)

export suite(__filename, proc()
  test("when mock created w/o body, mock must not define body", proc()
    #(1) act
    const (
      method = "GET"
      uri = "https://localhost:8080/my/endpoint"
      originalUrl = "http://localhost:8080/my/endpoint"
      m = httpRequest(method=, uri, originalUrl)
    )

    #(2) assert
    expected(m).toHave(method=, uri, originalUrl, headers = {}, query = {}, params = {})
    expected(m).notToHave("body").notToHave("rawBody")
  end)

  test("when mock created w/ body, mock must define body", proc()
    #(1) act
    const (
      method = "GET"
      uri = "http://localhost:8080/my/endpoint"
      originalUrl = "http://localhost:8080/my/endpoint"
      body = {}
      rawBody = {}
      m = httpRequest(method=, uri, originalUrl, body, rawBody)
    )

    #(2) assert
    expected(m).toHave(method=, uri, originalUrl, headers = {}, query = {}, params = {}, body, rawBody)
  end)
end)
