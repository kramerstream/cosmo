use (
  alias:expected
  {context} = ~
)

export suite(__filename, proc()
  test("when mock created w/o req, mock must not have req", proc()
    #(1) act
    const (
      functionName = "myfn"
      functionDirectory = "/my/dir"
      m = context(functionName=, functionDirectory)
    )

    #(2) assert
    expected(m).member("invocationId").toBeUuid()
    expected(m.executionContext).toHave(functionName=, functionDirectory).member("invocationId").toBeUuid()
    expected(m).member("bindings").toBeMap().member("bindingData").toBeMap()
    expected(m.traceContext).member("attributes").toBeMap()
    expected(m.log).toBeFn()
    expected(m.done).toBeFn()
    expected(m).notToHave("req")
  end)

  test("when mock created w/ req, mock must have req", proc()
    #(1) act
    const (
      functionName = "myfn"
      functionDirectory = "/my/dir"
      req = {}
      res = {}
      m = context(functionName=, functionDirectory, req, res)
    )

    #(2) assert
    expected(m).toHave(req=, res).member("invocationId").toBeUuid()
    expected(m.executionContext).toHave(functionName=, functionDirectory).member("invocationId").toBeUuid()
    expected(m).member("bindings").toBeMap().member("bindingData").toBeMap()
    expected(m.traceContext).member("attributes").toBeMap()
    expected(m.log).toBeFn()
    expected(m.done).toBeFn()
  end)
end)
